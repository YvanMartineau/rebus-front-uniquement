<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Table Filter</title>
    <style>
      .hidden {
        display: none;
      }
    </style>
    <!--begin::Page Vendors Styles(used by this page)-->
    <link
      href="assets/css/datatables/datatables.bundle.css"
      rel="stylesheet"
      type="text/css"
    />
    <!--end::Page Vendors Styles-->
    <!--begin::Page Vendors Styles(used by this page)-->
    <link
      href="assets/plugins/custom/fullcalendar/fullcalendar.bundle.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="assets/plugins/custom/leaflet/leaflet.bundle.css"
      rel="stylesheet"
      type="text/css"
    />
    <!--end::Page Vendors Styles-->
    <!--begin::Global Theme Styles(used by all pages)-->
    <link
      href="assets/plugins/global/plugins.bundle.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="assets/plugins/custom/prismjs/prismjs.bundle.css"
      rel="stylesheet"
      type="text/css"
    />
    <link href="assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Global Theme Styles-->
  </head>
  <body>
    <h2>Filter Table</h2>
    <!--begin::Search Bar-->
    <div class="d-flex align-items-md-center mb-2 flex-column flex-md-row">
      <div class="bg-white rounded p-4 d-flex flex-grow-1 flex-sm-grow-0">
        <!--begin::Form-->
        <form class="kt-form kt-form--fit mb-15" id="filterForm">
          <div class="row mb-6">
            <div class="col-lg-2 mb-lg-0 mb-6">
              <label>No de serie:</label>
              <input
                type="text"
                class="form-control datatable-input"
                id="noDeSerie"
                placeholder="E.g: 4590"
              />
            </div>
            <div class="col-lg-2 mb-lg-0 mb-6">
              <label>Appareil:</label>
              <select class="form-control datatable-input" id="appareil">
                <option value="">Select</option>
                <option value="Imprimante">Imprimante</option>
                <option value="Scanner">Scanner</option>
                <option value="All In One">All In One</option>
              </select>
            </div>
            <div class="col-lg-2 mb-lg-0 mb-6">
              <label>Agence:</label>
              <select class="form-control datatable-input" id="agence">
                <option value="">Select</option>
                <option value="Bonandjo">Bonandjo</option>
                <option value="Agence de Deido">Agence de Deido</option>
              </select>
            </div>
            <div class="col-lg-2 mb-lg-0 mb-6">
              <label>Direction:</label>
              <select class="form-control datatable-input" id="direction">
                <option value="">Select</option>
                <option value="DSI">DSI</option>
                <option value="Acceuil">Acceuil</option>
              </select>
            </div>
            <div class="col-lg-2 mb-lg-0 mb-6">
              <label>Situation:</label>
              <select class="form-control datatable-input" id="situation">
                <option value="">Select</option>
                <option value="Rebus">Rebus</option>
                <option value="Remis en Service">Remis en Service</option>
              </select>
            </div>
            <div class="col-lg-3 mb-lg-0 mb-6">
              <label>Date (De - A):</label>
              <div class="input-daterange input-group">
                <input
                  type="date"
                  class="form-control datatable-input"
                  id="startDate"
                  name="start"
                  placeholder="De"
                />
                <div class="input-group-append">
                  <span class="input-group-text">to</span>
                </div>
                <input
                  type="date"
                  class="form-control datatable-input"
                  id="endDate"
                  name="end"
                  placeholder="A"
                />
              </div>
            </div>
          </div>
          <div class="row mt-8">
            <div class="col-lg-12">
              <button
                type="button"
                class="btn btn-danger btn-danger--icon"
                id="kt_search"
              >
                <span><i class="la la-search"></i> <span>Search</span></span>
              </button>
              &#160;&#160;
              <button
                type="button"
                class="btn btn-secondary btn-secondary--icon"
                id="kt_reset"
              >
                <span><i class="la la-close"></i> <span>Reset</span></span>
              </button>
            </div>
          </div>
        </form>
        <!--end::Form-->
      </div>
    </div>
    <!--end::Search Bar-->

    <div class="card-body">
      <!--begin: Datatable-->
      <table
        class="table table-separate table-head-custom table-checkable"
        id="kt_datatable1"
      >
        <thead>
          <tr>
            <th>No de serie</th>
            <th>Appareil</th>
            <th>Provenance</th>
            <th>Direction</th>
            <th>Etat</th>
            <th>Raison de mise en rebus</th>
            <th>Date</th>
            <th>Situation</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>64616-103</td>
            <td>Imprimante</td>
            <td>Bonandjo</td>
            <td>DSI</td>
            <td>
              <span class="label label-lg label-light-danger label-inline"
                >Non Fonctionnel</span
              >
            </td>
            <td>Ruban Endommage</td>
            <td>29/07/2024</td>
            <td>
              <span class="label label-lg label-light-danger label-inline"
                >Rebus</span
              >
            </td>
          </tr>
          <tr>
            <td>646a3</td>
            <td>Scanner</td>
            <td>Agence de Deido</td>
            <td>Acceuil</td>
            <td>
              <span class="label label-lg label-light-danger label-inline"
                >Non Fonctionnel</span
              >
            </td>
            <td>Ruban Endommage, Probleme D'alimentation</td>
            <td>17/09/2024</td>
            <td>
              <span class="label label-lg label-light-danger label-inline"
                >Rebus</span
              >
            </td>
          </tr>
          <tr>
            <td>96-13</td>
            <td>All In One</td>
            <td>Bonandjo</td>
            <td>DSI</td>
            <td>
              <span class="label label-lg label-light-success label-inline"
                >Fonctionnel</span
              >
            </td>
            <td>RAM Endommage</td>
            <td>01/10/2024</td>
            <td>
              <span class="label label-lg label-light-success label-inline"
                >Remis en Service</span
              >
            </td>
          </tr>
        </tbody>
      </table>
      <!--end: Datatable-->
    </div>

    <script>
      document
        .getElementById("kt_search")
        .addEventListener("click", function () {
          filterTable();
        });

      document
        .getElementById("kt_reset")
        .addEventListener("click", function () {
          document.getElementById("filterForm").reset();
          filterTable();
        });

      function filterTable() {
        let noDeSerie = document
          .getElementById("noDeSerie")
          .value.toUpperCase();
        let appareil = document.getElementById("appareil").value.toUpperCase();
        let agence = document.getElementById("agence").value.toUpperCase();
        let direction = document
          .getElementById("direction")
          .value.toUpperCase();
        let situation = document
          .getElementById("situation")
          .value.toUpperCase();
        let startDate = document.getElementById("startDate").value;
        let endDate = document.getElementById("endDate").value;

        let table = document.getElementById("kt_datatable1");
        let tr = table.getElementsByTagName("tr");

        for (let i = 1; i < tr.length; i++) {
          let tdNoDeSerie = tr[i]
            .getElementsByTagName("td")[0]
            .innerText.toUpperCase();
          let tdAppareil = tr[i]
            .getElementsByTagName("td")[1]
            .innerText.toUpperCase();
          let tdAgence = tr[i]
            .getElementsByTagName("td")[2]
            .innerText.toUpperCase();
          let tdDirection = tr[i]
            .getElementsByTagName("td")[3]
            .innerText.toUpperCase();
          let tdSituation = tr[i]
            .getElementsByTagName("td")[7]
            .innerText.toUpperCase();
          let tdDate = tr[i].getElementsByTagName("td")[6].innerText;

          let rowDate = new Date(tdDate);
          let start = new Date(startDate);
          let end = new Date(endDate);

          let matchNoDeSerie =
            noDeSerie === "" || tdNoDeSerie.includes(noDeSerie);
          let matchAppareil = appareil === "" || tdAppareil.includes(appareil);
          let matchAgence = agence === "" || tdAgence.includes(agence);
          let matchDirection =
            direction === "" || tdDirection.includes(direction);
          let matchSituation =
            situation === "" || tdSituation.includes(situation);
          let matchDate =
            (!startDate && !endDate) || (start <= rowDate && rowDate <= end);

          if (
            matchNoDeSerie &&
            matchAppareil &&
            matchAgence &&
            matchDirection &&
            matchSituation &&
            matchDate
          ) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    </script>

    <!--begin::Global Config(global config for global JS scripts)-->
    <script>
      var KTAppSettings = {
        breakpoints: { sm: 576, md: 768, lg: 992, xl: 1200, xxl: 1200 },
        colors: {
          theme: {
            base: {
              white: "#ffffff",
              danger: "#8950FC",
              secondary: "#E5EAEE",
              success: "#1BC5BD",
              info: "#8950FC",
              warning: "#FFA800",
              danger: "#F64E60",
              light: "#F3F6F9",
              dark: "#212121",
            },
            light: {
              white: "#ffffff",
              danger: "#E1E9FF",
              secondary: "#ECF0F3",
              success: "#C9F7F5",
              info: "#EEE5FF",
              warning: "#FFF4DE",
              danger: "#FFE2E5",
              light: "#F3F6F9",
              dark: "#D6D6E0",
            },
            inverse: {
              white: "#ffffff",
              danger: "#ffffff",
              secondary: "#212121",
              success: "#ffffff",
              info: "#ffffff",
              warning: "#ffffff",
              danger: "#ffffff",
              light: "#464E5F",
              dark: "#ffffff",
            },
          },
          gray: {
            "gray-100": "#F3F6F9",
            "gray-200": "#ECF0F3",
            "gray-300": "#E5EAEE",
            "gray-400": "#D6D6E0",
            "gray-500": "#B5B5C3",
            "gray-600": "#80808F",
            "gray-700": "#464E5F",
            "gray-800": "#1B283F",
            "gray-900": "#212121",
          },
        },
        "font-family": "Poppins",
      };
    </script>
    <!--end::Global Config-->
    <!--begin::Global Theme Bundle(used by all pages)-->
    <script src="assets/plugins/global/plugins.bundle.js"></script>
    <script src="assets/plugins/custom/prismjs/prismjs.bundle.js"></script>
    <script src="assets/js/scripts.bundle.js"></script>
    <!--end::Global Theme Bundle-->
    <!--begin::Page Vendors(used by this page)-->
    <script src="assets/plugins/custom/fullcalendar/fullcalendar.bundle.js"></script>
    <script src="assets/plugins/custom/leaflet/leaflet.bundle.js"></script>
    <!--end::Page Vendors-->
    <!--begin::Page Scripts(used by this page)-->
    <script src="assets/js/pages/widgets.js"></script>
    <!--end::Page Scripts-->
    <!--begin::Page Vendors(used by this page)-->
    <script src="assets/js/datatables/datatables.bundle.js"></script>
    <!--end::Page Vendors-->
    <!--begin::Page Scripts(used by this page)-->
    <script src="assets/js/datatables/buttons.js"></script>
    <!--end::Page Scripts-->
  </body>
</html>
